--[[
  Fullscreen Lock GUI â€” "Choco you suck!!"
  - Covers the whole screen with a message
  - Grabs focus, sinks inputs, hides core UI, locks mouse to center
  - Makes it VERY hard to click the Roblox Leave button (ESC)
  - Note: Roblox/OS-level quit (ESC menu/Alt+F4) cannot be 100% blocked.

  Optional panic unloader for YOU (the runner): press RightAlt to remove.
]]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local ContextActionService = game:GetService("ContextActionService")
local StarterGui = game:GetService("StarterGui")
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")
local GuiService = game:GetService("GuiService")

local LP = Players.LocalPlayer

-- create or reuse gui
local gui = Instance.new("ScreenGui")
gui.Name = "ChocoLockGUI"
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
pcall(function()
	gui.DisplayOrder = 1000000000 -- very high
end)

-- parent into CoreGui if allowed, else PlayerGui
pcall(function()
	gui.Parent = CoreGui
end)
if not gui.Parent then
	gui.Parent = LP:WaitForChild("PlayerGui")
end

-- full black background
local bg = Instance.new("Frame")
bg.BackgroundColor3 = Color3.fromRGB(8, 8, 8)
bg.BorderSizePixel = 0
bg.Size = UDim2.fromScale(1, 1)
bg.Parent = gui

-- subtle animated gradient for drama
local grad = Instance.new("UIGradient")
grad.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0.0, Color3.fromRGB(20,20,20)),
	ColorSequenceKeypoint.new(0.5, Color3.fromRGB(40,40,40)),
	ColorSequenceKeypoint.new(1.0, Color3.fromRGB(20,20,20)),
}
grad.Rotation = 0
grad.Parent = bg

-- big message
local text = Instance.new("TextLabel")
text.BackgroundTransparency = 1
text.Size = UDim2.fromScale(1, 1)
text.Text = "Choco you suck!!"
text.Font = Enum.Font.GothamBlack
text.TextScaled = true
text.TextColor3 = Color3.fromRGB(255, 255, 255)
text.TextStrokeTransparency = 0.1
text.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
text.Parent = bg

-- fun bounce tween
local function bounce()
	local s = 1.0
	local dir = 1
	local tconn
	tconn = RunService.Heartbeat:Connect(function(dt)
		s += dt * 0.7 * dir
		if s >= 1.05 then dir = -1 end
		if s <= 0.95 then dir = 1 end
		text.TextSize = math.floor(100 * s)
	end)
	return tconn
end
local bounceConn = bounce()

-- modal blocker to eat clicks
local blocker = Instance.new("TextButton")
blocker.Name = "ModalBlocker"
blocker.Size = UDim2.fromScale(1, 1)
blocker.Position = UDim2.fromScale(0, 0)
blocker.BackgroundTransparency = 1
blocker.Text = ""
blocker.Modal = true -- captures input focus for keyboard/gamepad
blocker.AutoButtonColor = false
blocker.ZIndex = 2
blocker.Parent = gui

-- eat every input
blocker.InputBegan:Connect(function() end)
blocker.InputEnded:Connect(function() end)

-- sink most key/mouse actions at high priority
local keys = {
	Enum.KeyCode.W, Enum.KeyCode.A, Enum.KeyCode.S, Enum.KeyCode.D,
	Enum.KeyCode.Space, Enum.KeyCode.Tab, Enum.KeyCode.Backspace,
	Enum.KeyCode.Return, Enum.KeyCode.One, Enum.KeyCode.Two, Enum.KeyCode.Three,
	Enum.KeyCode.Four, Enum.KeyCode.Five, Enum.KeyCode.Six, Enum.KeyCode.Seven,
	Enum.KeyCode.Eight, Enum.KeyCode.Nine, Enum.KeyCode.Zero,
	Enum.KeyCode.Q, Enum.KeyCode.E, Enum.KeyCode.R, Enum.KeyCode.F,
	Enum.KeyCode.LeftShift, Enum.KeyCode.LeftControl, Enum.KeyCode.LeftAlt,
	Enum.KeyCode.RightShift, Enum.KeyCode.RightControl,
	Enum.KeyCode.ButtonA, Enum.KeyCode.ButtonB, Enum.KeyCode.ButtonX, Enum.KeyCode.ButtonY,
	Enum.KeyCode.ButtonL1, Enum.KeyCode.ButtonR1, Enum.KeyCode.ButtonStart,
	Enum.UserInputType.MouseButton1, Enum.UserInputType.MouseButton2,
	Enum.UserInputType.MouseButton3, Enum.UserInputType.MouseWheel
}

ContextActionService:BindActionAtPriority(
	"CHOCOLockSink",
	function(_, state)
		if state == Enum.UserInputState.Begin then
			return Enum.ContextActionResult.Sink
		end
		return Enum.ContextActionResult.Sink
	end,
	false,
	math.huge,
	table.unpack(keys)
)

-- hide as much core UI as Roblox allows (chat/backpack/etc.)
local function hideCore()
	local ok, err = pcall(function()
		StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Chat, false)
		StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Backpack, false)
		StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.EmotesMenu, false)
		StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Health, false)
		StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.PlayerList, false)
	end)
	return ok, err
end
hideCore()

-- disable reset button if possible
pcall(function()
	StarterGui:SetCore("ResetButtonCallback", false)
end)

-- constantly lock the mouse to center and keep focus on our blocker
local runConn = RunService.RenderStepped:Connect(function()
	UserInputService.MouseIconEnabled = false
	UserInputService.MouseBehavior = Enum.MouseBehavior.LockCenter
	GuiService.SelectedObject = blocker -- trap gamepad selection on our GUI
	-- if someone tries to delete, re-parent
	if not gui.Parent then
		pcall(function() gui.Parent = CoreGui end)
		if not gui.Parent then gui.Parent = LP:FindFirstChild("PlayerGui") or LP:WaitForChild("PlayerGui") end
	end
end)

-- animated gradient sweep
local rot = 0
RunService.Heartbeat:Connect(function(dt)
	rot = (rot + dt * 35) % 360
	grad.Rotation = rot
end)

-- optional panic key for YOU (RightAlt) to clean up
UserInputService.InputBegan:Connect(function(input, gp)
	if gp then return end
	if input.KeyCode == Enum.KeyCode.RightAlt then
		pcall(function() ContextActionService:UnbindAction("CHOCOLockSink") end)
		pcall(function() runConn:Disconnect() end)
		pcall(function() if bounceConn then bounceConn:Disconnect() end end)
		gui:Destroy()
		-- re-enable core UI (best effort)
		pcall(function()
			StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Chat, true)
			StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Backpack, true)
			StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.EmotesMenu, true)
			StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Health, true)
			StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.PlayerList, true)
			StarterGui:SetCore("ResetButtonCallback", true)
		end)
	end
end)

-- keep on top if the place respawns you
LP.CharacterAdded:Connect(function()
	task.wait(0.2)
	pcall(function() gui.Parent = CoreGui end)
	if not gui.Parent then
		gui.Parent = LP:FindFirstChild("PlayerGui") or LP:WaitForChild("PlayerGui")
	end
end)

-- done: fullscreen lock is active
